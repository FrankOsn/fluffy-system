# ğŸ‰ v0.0.3 - Cambios Principales

## âœ¨ Nuevas Funcionalidades

### 1. **Contador de Hojas Totales** ğŸ“Š
- **UbicaciÃ³n**: SecciÃ³n "ğŸ“„ Hoja Actual"
- **Muestra**: `1/6` (nÃºmero de hoja actual / total de hojas)
- **ActualizaciÃ³n**: En tiempo real al cambiar hojas o cargar datos

### 2. **Entrada Hexadecimal de Colores** ğŸ¨
- **Cambio**: De color picker visual a inputs HEX directos
- **Beneficio**: MÃ¡s fÃ¡cil de copiar/pegar colores exactos
- **Placeholder**: Muestra el formato esperado (#7B0000)
- **3 Campos**:
  - ğŸ”´ Fondo (background)
  - ğŸ“ Texto (text)
  - ğŸ“ Divisor (divider line)

### 3. **Rangos PT sin LÃ­mite MÃ­nimo** ğŸ“
**Antes**: min=60, min=40, min=50  
**Ahora**: min=1, max=300 para TODOS  

| Campo | MÃ­n | MÃ¡x | Anterior |
|-------|-----|-----|----------|
| CategorÃ­a | 1 | 300 | 60-200 |
| Nombre | 1 | 300 | 40-150 |
| Precio | 1 | 300 | 50-200 |

### 4. **ExportaciÃ³n de TODAS las Hojas** ğŸ’¾

#### PNG - Dos Botones:
- **PNG Actual**: Descarga solo la hoja visible
- **PNG TODO**: Descarga TODAS las hojas
  - Genera archivos: `01_Res y Cerdo.png`, `02_Pollo.png`, etc.
  - Nomenclatura automÃ¡tica con nÃºmero de orden
  - Delay entre descargas para evitar conflictos
  - ConfirmaciÃ³n al terminar

#### PDF - Dos Botones:
- **PDF Actual**: Descarga solo la hoja visible
- **PDF TODO**: Descarga TODAS las hojas como PDFs individuales
  - Genera archivos: `01_Res y Cerdo.pdf`, `02_Pollo.pdf`, etc.
  - OrientaciÃ³n automÃ¡tica (landscape o portrait)
  - Dimensiones exactas (16:9)
  - ConfirmaciÃ³n al terminar

### 5. **ConfiguraciÃ³n de Estilos por Hoja** âš™ï¸

#### Nuevo Sistema de Guardado:
- **BotÃ³n "ğŸ’¾ Guardar"**: Guarda estilos INDEPENDIENTES para cada hoja
  - Cada hoja almacena su propia configuraciÃ³n
  - Al cambiar de hoja, se cargan sus estilos automÃ¡ticamente
  - Al volver a esa hoja, recupera sus estilos

#### Nuevo Sistema de Carga:
- **BotÃ³n "ğŸ“‚ Cargar"**: Carga una configuraciÃ³n previamente guardada
  - Formato: `menu_config.json`
  - Restaura TODOS los estilos de todas las hojas
  - Permite reutilizar configuraciones sin empezar de cero

#### Archivo de ConfiguraciÃ³n (JSON):
```json
{
  "version": "0.0.2",
  "timestamp": "2026-02-09T...",
  "dataSource": "saved_config",
  "sheetStyles": {
    "res_cerdo_01": {
      "categoria_pt": 120,
      "nombre_pt": 85,
      "precio_pt": 100,
      "bgcolor": "#7B0000",
      "textcolor": "#FFFDD0",
      "dividercolor": "#D4AF37",
      "itemSpacing": 32,
      "margin": 50
    },
    "pollo_01": {
      "categoria_pt": 115,
      "nombre_pt": 80,
      ...
    }
  }
}
```

### 6. **RotaciÃ³n AutomÃ¡tica - FIJA** â±ï¸

**Problemas Solucionados**:
- âœ… Ahora funcionamuestra de verdad
- âœ… Cicla correctamente a travÃ©s de todas las hojas
- âœ… Respeta el intervalo en segundos (mÃ­nimo 5)
- âœ… Guarda estilos de cada hoja antes de rotar
- âœ… Carga estilos correctos al cambiar de hoja

**CÃ³mo usar**:
1. Ingresa intervalo en segundos (ej: 300 = 5 minutos)
2. Click "Iniciar"
3. El menÃº cambiarÃ¡ automÃ¡ticamente
4. Click "Parar" para detener

### 7. **ExportaciÃ³n a PDF - REPARADA** ğŸ“„

**Problemas Solucionados**:
- âœ… jsPDF ahora se carga correctamente
- âœ… ConversiÃ³n de dimensiones (px â†’ mm) correcta
- âœ… OrientaciÃ³n automÃ¡tica (landscape/portrait)
- âœ… Soporta exportar todas las hojas
- âœ… Nombres de archivo descriptivos

**Formato**:
- ResoluciÃ³n: 1280Ã—720 (landscape) o 720Ã—1280 (portrait)
- Tipo: PDF de una pÃ¡gina
- Editable: SÃ­, con software compatible

---

## ğŸ”„ Flujo de Trabajo Recomendado

### SituaciÃ³n 1: DiseÃ±ar desde Cero
```
1. Cargar Ejemplo
2. Seleccionar hoja
3. Ajustar colores/tamaÃ±os/espaciado
4. Cambiar a siguiente hoja
5. Repetir pasos 3-4 para cada hoja
6. Hacer click "ğŸ’¾ Guardar" para guardar TODO
7. Exportar PNG TODO o PDF TODO
```

### SituaciÃ³n 2: Reutilizar ConfiguraciÃ³n Anterior
```
1. Cargar Ejemplo
2. Click "ğŸ“‚ Cargar"
3. Seleccionar archivo `menu_config.json` guardado
4. Â¡Listo! Todos los estilos restaurados
5. Hacer pequeÃ±os ajustes si es necesario
6. Exportar
```

### SituaciÃ³n 3: Mostrar en Pantalla con RotaciÃ³n
```
1. Cargar Ejemplo
2. Personalizar cada hoja
3. Click "ğŸ’¾ Guardar" (opcional)
4. Ingresa intervalo (ej: 600 segundos = 10 min)
5. Click "Iniciar"
6. El menÃº rota automÃ¡ticamente
7. Click "Parar" cuando quieras
```

---

## ğŸ“ Cambios TÃ©cnicos

### admin.html
- Agregado: elemento `<strong id="sheetCount">` para contador
- Cambiado: `<input type="color">` â†’ `<input type="text">` para HEX
- Cambiado: min values de 60/40/50 â†’ 1 para todos
- Agregado: SecciÃ³n "âš™ï¸ ConfiguraciÃ³n" con Guardar/Cargar
- Agregado: 4 botones de exportaciÃ³n (PNG/PDF Ã— Actual/TODO)
- Agregado: Input oculto para carga de config

### admin.js (v0.2 â†’ v0.3)
- **Nuevo**: Sistema `sheetStyles` para guardar estilos independientes por hoja
- **Nuevo**: FunciÃ³n `saveSheetStyle()` para guardar estilos actuales
- **Nuevo**: FunciÃ³n `loadSheetStyle()` para cargar estilos de una hoja
- **Nuevo**: FunciÃ³n `updateSheetCounter()` para mostrar contador
- **Mejorado**: RotaciÃ³n ahora guarda/carga estilos correctamente
- **Mejorado**: PDF export con conversiÃ³n correcta de dimensiones
- **Nuevo**: ExportaciÃ³n de TODAS las hojas con delay y confirmaciÃ³n
- **Nuevo**: Sistema de guardar/cargar configuraciÃ³n completa
- **Mejorado**: Validaciones y manejo de errores
- **Mejorado**: Logs en consola para debugging

---

## ğŸ¯ Casos de Uso

### Caso 1: CarnicerÃ­a con CategorÃ­as Diferentes
```
âœ“ Res y Cerdo: Rojo oscuro (#7B0000)
âœ“ Pollo: Naranja (#E6A519)
âœ“ Pescados: Azul marino (#001F5B)
âœ“ VÃ­veres: Verde (#004B23)

Con v0.0.3:
- Cada una tiene SUS PROPIOS tamaÃ±os y colores
- Guardas TODO en un archivo
- No repites trabajo al cambiar de dÃ­a
```

### Caso 2: Pantalla Digital Rotativa
```
âœ“ Configuras cada menÃº perfecto
âœ“ Guardas configuraciÃ³n
âœ“ Activas rotaciÃ³n (ej: cada 5 minutos)
âœ“ El sistema cambia automÃ¡ticamente
âœ“ Las personas ven menÃº nuevo cada 5 min
```

### Caso 3: ImpresiÃ³n de Todos los MenÃºs
```
âœ“ Click "PNG TODO" â†’ Descarga 6 archivos PNG
âœ“ Click "PDF TODO" â†’ Descarga 6 archivos PDF
âœ“ Imprimes todo en 2 clicks
âœ“ Cada menÃº con su color/diseÃ±o Ãºnico
```

---

## âœ… Checklist de VerificaciÃ³n

- [x] Contador de hojas (muestra X/Y)
- [x] Inputs hexadecimales para colores
- [x] Ranges PT sin lÃ­mite mÃ­nimo (min=1)
- [x] BotÃ³n "PNG TODO" (exporta todas)
- [x] BotÃ³n "PDF TODO" (exporta todas)
- [x] Estilos independientes por hoja
- [x] Guardar/Cargar configuraciÃ³n
- [x] RotaciÃ³n funcional
- [x] PDF export funcional
- [x] Nombres de archivo descriptivos
- [x] Confirmaciones al usuario
- [x] Logs en consola para debug

---

## ğŸ› Bugs Solucionados

| Bug | Causa | SoluciÃ³n |
|-----|-------|----------|
| RotaciÃ³n no funcionaba | No guardaba estado entre hojas | Agregado saveSheetStyle() |
| PDF no exportaba | jsPDF con dimensiones incorrectas | ConversiÃ³n pxâ†’mm correcta |
| Colores no se guardaban | Sin sistema de persistencia | Agregado sheetStyles{} |
| Mismo estilo en todas hojas | Sin diferenciaciÃ³n | Sistema independiente por sheet |

---

## ğŸ“š DocumentaciÃ³n Actualizada

Se recomienda revisar/actualizar:
- [ ] FEATURES.md (agregar v0.0.3 features)
- [ ] QUICKSTART.md (mencionar nueva config)
- [ ] README.md (versiÃ³n a 0.0.3)

---

## ğŸš€ PrÃ³ximas Versiones (v0.0.4+)

- [ ] Importar configuraciÃ³n directamente desde hoja
- [ ] Presets de paletas Pantone
- [ ] Historial de cambios
- [ ] Dashboard con miniaturas de hojas
- [ ] SincronizaciÃ³n multi-pantalla

---

**VersiÃ³n**: 0.0.3  
**Fecha**: 9 Febrero 2026  
**Status**: âœ… COMPLETADO Y TESTEADO
